<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<script type="text/javascript" src="http://code.jquery.com/jquery-2.0.0.min.js"></script>
<script type="text/javascript">
$(function() {
  showTodoList();

  $("#regForm").submit(function() {
    if(!window.confirm("登録してもよろしいですか？")) {
      return false;
    }
    var now = new Date();
    var key   = "todo" + now.getTime();
    var saveItems = [now, $("#title").val(), $("#detail").val()];
    var value = JSON.stringify(saveItems);
    localStorage.setItem(key, value);
  });
});

function showTodoList() {
  var todoList = $("#todoList");
  var colums = ["登録日", "タイトル", "詳細"];
  todoList
    .append("<caption>TODOリスト</caption>")
    .append("<tr><th>" + colums.join("</th><th>") + "</th></tr>");
  for(var i = 0; i < localStorage.length; i++) {
    var key = localStorage.key(i);
    if(key.match(/^todo/)) {
      var value  = localStorage.getItem(key);
      var items  = JSON.parse(value);
      var regDay = new Date(items[0]);
      items[0] = [regDay.getFullYear(), regDay.getMonth() + 1, regDay.getDate()].join("/");
      todoList.append("<tr><td>" + items.join("</td><td>") + "</td></tr>");
    }
  }
}
</script>
<title>TODO List</title>
</head>
<body>
<table id="todoList" border="1"></table>
<hr>
<p>新規登録</p>
<form id="regForm">
  <label for="title">title</label>：
  <input type="text" name="title" id="title"><br>
  <label for="detail">detail</label>：<br>
  <textarea name="detail" id="detail" cols="30" rows="10"></textarea><br>
  <input type="submit" value="送信">
</form>

</body>
</html>